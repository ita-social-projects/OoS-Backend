# Default values for outofschool.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

global: {}

# TODO: Configure global pull secrets
imagePullSecrets: []

# TODO: Do we need overrides?
nameOverride: ""
fullnameOverride: ""
# TODO: remove after fixing test connection
service:
  port: 8080

# TODO: Already have a service account for app, do we need a global one?
serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

webapi:
  enabled: true
  image:
    repository: gcr.io/gcp101292-pozashkillya/oos-api
    pullPolicy: IfNotPresent
    tag: testing
  containerPort: 8080
  configuration:
    extraEnvironment:
      # ReverseProxy__BasePath: /webapi
      ASPNETCORE_ENVIRONMENT: Kubernetes
      AppDefaults__Version: testing
    secrets:
    - type: env
      name: mysql-api-auth
      keys:
      - key: API_PASSWORD
        envKey: ConnectionStringsOverride__DefaultConnection__Password
        upper: false
    - type: env
      name: elasticsearch-credentials
      keys:
      - key: apipass
        envKey: Elasticsearch__Password
        upper: false
    - type: env
      name: redis-auth
      keys:
      - key: password
        envKey: Redis__Password
        upper: false
    # TODO: add geo api key to secrets
    # - type: env
    #   name: mysql-api-auth
    #   keys:
    #   - key: API_PASSWORD
    #     envKey: GeoCoding__ApiKey
    #     upper: false
  resources:
    limits:
      memory: 512Mi
identity:
  enabled: false
  image:
    repository: gcr.io/gcp101292-pozashkillya/oos-auth
    pullPolicy: IfNotPresent
    tag: 1.0.0-RC1
  extraEnvironment: {}
    # ReverseProxy__BasePath: /identity
  connectionString:
    username: oos
    secret:
      name: mysql-auth
      key: mysql-password
frontend:
  enabled: false
  image:
    repository: gcr.io/gcp101292-pozashkillya/oos-frontend
    pullPolicy: IfNotPresent
    tag: 1.0.0-RC1
